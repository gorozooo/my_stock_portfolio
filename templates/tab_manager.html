{% extends "base.html" %}
{% load static %}

{% block title %}ã‚¿ãƒ–ç®¡ç†{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/tab_manager.css' %}">
{% endblock %}

{% block content %}

<h1>ã‚¿ãƒ–ç®¡ç†ç”»é¢</h1>

<!-- ãƒ‡ãƒãƒƒã‚°: tabsã®ä¸­èº«ã‚’ç¢ºèª -->
<pre>
{{ tabs|default:"tabs is empty"|safe }}
</pre>

<!-- ã‚¿ãƒ–ä¸€è¦§ -->
<div id="tab-list" class="tab-list">
  {% if tabs %}
    {% for tab in tabs %}
    <div class="tab-card" data-id="{{ tab.id }}">
      <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
      <div class="tab-header">
        <div class="tab-main">
          <span class="tab-icon">
            {% if tab.icon %}
              {{ tab.icon }}
            {% else %}
              ğŸ“‘
            {% endif %}
          </span>
          <span class="tab-name">
            {% if tab.name %}
              {{ tab.name }}
            {% else %}
              ï¼ˆæœªè¨­å®šï¼‰
            {% endif %}
          </span>
        </div>
        <div class="tab-actions">
          <button class="edit-tab-btn">âœï¸</button>
          <button class="delete-tab-btn">ğŸ—‘ï¸</button>
          <button class="toggle-submenu">â–¼</button>
        </div>
      </div>

      <!-- ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
      <div class="submenu-list">
        {% if tab.submenus %}
          {% for sub in tab.submenus %}
          <div class="submenu-item" data-id="{{ sub.id }}">
            <span>{{ sub.name|default:"ï¼ˆæœªè¨­å®šï¼‰" }}</span>
            <div class="submenu-actions">
              <button class="edit-sub-btn">âœï¸</button>
              <button class="delete-sub-btn">ğŸ—‘ï¸</button>
            </div>
          </div>
          {% endfor %}
        {% else %}
          <div class="submenu-item submenu-empty">
            <span>ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãªã—</span>
          </div>
        {% endif %}
        <button class="add-submenu-btn">ï¼‹ ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¿½åŠ </button>
      </div>
    </div>
    {% endfor %}
  {% else %}
    <div class="no-tabs">
      <p>ã‚¿ãƒ–ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>
    </div>
  {% endif %}
</div>

<!-- ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒœã‚¿ãƒ³ -->
<button id="add-tab-fab" class="fab">ï¼‹</button>

<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
<script src="{% static 'js/tab_manager.js' %}"></script>

{% endblock %}