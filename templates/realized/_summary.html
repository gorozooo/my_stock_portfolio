<!-- templates/realized/_summary.html -->
{% load humanize %}
<div class="summary-grid">
  <div class="sum-card">
    <div class="k">件数</div>
    <div class="v">{{ agg.n }}</div>
  </div>

  <div class="sum-card">
    <div class="k">数量合計</div>
    <div class="v">{{ agg.qty|intcomma }}</div>
  </div>

  <div class="sum-card">
    <div class="k">手数料合計</div>
    <div class="v">¥{{ agg.fee|floatformat:0|intcomma }}</div>
  </div>

  {# 💰 現金ベース（受渡の積み上げ） #}
  <div class="sum-card">
    <div class="k">💰 実損(現金)合計</div>
    <div class="v {% if agg.cash < 0 %}negative{% else %}positive{% endif %}">
      ¥{{ agg.cash|floatformat:0|intcomma }}
    </div>
  </div>

  {# 📈 投資家PnL（ユーザー手入力の"実損"の累計） #}
  <div class="sum-card">
    <div class="k">📈 実現損益合計</div>
    <div class="v {% if agg.pnl < 0 %}negative{% else %}positive{% endif %}">
      ¥{{ agg.pnl|floatformat:0|intcomma }}
    </div>
  </div>
</div>