<!-- templates/realized/_summary.html -->
{% load humanize %}
<style>
  /* ==== Summary scoped style (HTMXã§å·®ã—æ›¿ãˆæ™‚ã«ã‚‚åŠ¹ãã‚ˆã†å±€æ‰€å®šç¾©) ==== */
  .sum-grid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:12px}
  @media (max-width:760px){.sum-grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
  .sum-card{
    background:rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.10);
    border-radius:14px; padding:12px 14px;
  }
  .sum-k{font-size:12px; color:#b9c3dd; display:flex; align-items:center; gap:6px; white-space:nowrap}
  .sum-v{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;
         font-variant-numeric:tabular-nums; font-size:20px; font-weight:700;
         color:#e8ecff; margin-top:4px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .sum-v.positive{color:#34d399}  /* emerald-400 */
  .sum-v.negative{color:#f87171}  /* rose-400 */
  .nowrap{white-space:nowrap}
</style>

<div class="sum-grid">
  <!-- ä»¶æ•° -->
  <div class="sum-card">
    <div class="sum-k">ğŸ“„ ä»¶æ•°</div>
    <div class="sum-v">{{ agg.n|default:0 }}</div>
  </div>

  <!-- æ•°é‡åˆè¨ˆ -->
  <div class="sum-card">
    <div class="sum-k">ğŸ”¢ æ•°é‡åˆè¨ˆ</div>
    <div class="sum-v">{{ agg.qty|default:0|intcomma }}</div>
  </div>

  <!-- æ‰‹æ•°æ–™åˆè¨ˆ -->
  <div class="sum-card">
    <div class="sum-k">ğŸ’¸ æ‰‹æ•°æ–™åˆè¨ˆ</div>
    <div class="sum-v">Â¥{{ agg.fee|default:0|floatformat:0|intcomma }}</div>
  </div>

  <!-- ğŸ’° å®Ÿæ(ç¾é‡‘) åˆè¨ˆ = cashflowåˆè¨ˆ -->
  <div class="sum-card">
    <div class="sum-k">ğŸ’° å®Ÿæ(ç¾é‡‘) åˆè¨ˆ</div>
    <div class="sum-v {% if agg.pnl < 0 %}negative{% else %}positive{% endif %}">
      Â¥{{ agg.pnl|default:0|floatformat:0|intcomma }}
    </div>
  </div>
</div>