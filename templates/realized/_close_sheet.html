{# templates/realized/_close_sheet.html #}
<div class="sheet">
  <div class="sheet-title">{{ h.ticker }} をクローズ</div>
  <form hx-post="{% url 'holding_close_submit' h.id %}"
        hx-target="#pnlTableWrap" hx-swap="outerHTML"
        onsubmit="window.dispatchEvent(new CustomEvent('bottomtab:close'))">
    {% csrf_token %}
    <div class="grid grid-cols-2 gap-3">
      <label class="flex flex-col gap-1">
        <span class="text-xs text-slate-400">日付</span>
        <input name="date" type="date" value="{{ prefill.date }}" class="in" />
      </label>
      <label class="flex flex-col gap-1">
        <span class="text-xs text-slate-400">数量</span>
        <input name="qty" type="number" min="1" max="{{ h.qty }}" value="{{ prefill.qty }}" class="in" />
        <small class="text-xs text-slate-500">保有: {{ h.qty }}</small>
      </label>
      <label class="flex flex-col gap-1 col-span-2">
        <span class="text-xs text-slate-400">売却価格</span>
        <input name="price" inputmode="decimal" placeholder="例: 1234.5" class="in" />
      </label>
      <label class="flex flex-col gap-1">
        <span class="text-xs text-slate-400">手数料</span>
        <input name="fee" inputmode="decimal" value="{{ prefill.fee }}" class="in" />
      </label>
      <label class="flex flex-col gap-1">
        <span class="text-xs text-slate-400">税</span>
        <input name="tax" inputmode="decimal" value="{{ prefill.tax }}" class="in" />
      </label>
      <label class="flex flex-col gap-1 col-span-2">
        <span class="text-xs text-slate-400">メモ</span>
        <input name="memo" placeholder="任意メモ" class="in" />
      </label>
    </div>
    <button class="btn-primary w-full mt-4">売却を記録</button>
  </form>
</div>