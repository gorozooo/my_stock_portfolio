{% load humanize %}
<style>
  .bd-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:10px 0}
  .bd-card{padding:10px 12px;border:1px solid rgba(255,255,255,.08);border-radius:12px;background:rgba(255,255,255,.03)}
  .bd-title{font-size:12px;color:#a7b1d8;margin-bottom:6px}
  .bd-row{display:flex;justify-content:space-between;align-items:baseline;font-variant-numeric:tabular-nums;margin:4px 0}
  .pos{color:#86efac} .neg{color:#fca5a5} .muted{color:#94a3b8}
</style>

<div class="bd-grid">
  <div class="bd-card">
    <div class="bd-title">証券会社 別</div>
    {% if brokers %}
      {% for r in brokers %}
        {% with v=r.pnl %}
        <div class="bd-row">
          <div>{{ r.label }}（{{ r.n }}件）</div>
          <div class="{% if v >= 0 %}pos{% else %}neg{% endif %}">¥{{ v|floatformat:0|intcomma }}</div>
        </div>
        {% endwith %}
      {% endfor %}
    {% else %}
      <div class="muted">データなし</div>
    {% endif %}
  </div>

  <div class="bd-card">
    <div class="bd-title">口座区分 別</div>
    {% if accounts %}
      {% for r in accounts %}
        {% with v=r.pnl %}
        <div class="bd-row">
          <div>{{ r.label }}（{{ r.n }}件）</div>
          <div class="{% if v >= 0 %}pos{% else %}neg{% endif %}">¥{{ v|floatformat:0|intcomma }}</div>
        </div>
        {% endwith %}
      {% endfor %}
    {% else %}
      <div class="muted">データなし</div>
    {% endif %}
  </div>
</div>