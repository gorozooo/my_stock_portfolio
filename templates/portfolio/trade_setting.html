{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="glass-card">
  <h2>⚙️ トレード設定</h2>
  <form method="post">
    {% csrf_token %}

    <!-- 口座残高 -->
    <div class="setting-item">
      <label>口座残高</label>
      <input type="number" name="account_equity"
             value="{{ setting.account_equity }}"
             step="10000" min="0"
             class="setting-input">
    </div>

    <!-- リスク％（スライダー + 数字連動） -->
    <div class="setting-item">
      <label>リスク％</label>
      <div class="slider-wrap">
        <input id="riskSlider" type="range" name="risk_pct"
               value="{{ setting.risk_pct }}"
               min="0.1" max="5" step="0.1">
        <span id="riskValue">{{ setting.risk_pct }}%</span>
      </div>
    </div>

    <button type="submit" class="btn-save">保存</button>
  </form>
</div>

<script>
  const slider = document.getElementById('riskSlider');
  const valueLabel = document.getElementById('riskValue');
  slider.addEventListener('input', () => {
    valueLabel.textContent = slider.value + "%";
  });
</script>

<style>
  .glass-card {
    margin:20px auto; padding:20px;
    border-radius:20px;
    background:rgba(255,255,255,0.05);
    backdrop-filter:blur(12px);
    box-shadow:0 4px 20px rgba(0,0,0,0.2);
    max-width:400px;
  }
  .glass-card h2 { margin:0 0 16px; font-size:20px; }
  .setting-item { margin-bottom:20px; }
  .setting-input {
    width:100%; padding:10px; border-radius:12px;
    border:1px solid rgba(255,255,255,0.2);
    background:rgba(255,255,255,0.1);
    color:#fff;
  }
  .slider-wrap { display:flex; align-items:center; gap:10px; }
  input[type=range] { flex:1; }
  .btn-save {
    width:100%; padding:12px;
    border:none; border-radius:12px;
    background:#26d07c; color:#fff;
    font-size:16px; font-weight:600;
  }
</style>
{% endblock %}