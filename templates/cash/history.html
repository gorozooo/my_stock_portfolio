{% extends "base.html" %}
{% load humanize %}
{% block title %}現金台帳{% endblock %}

{% block content %}
<style>
  .card{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:14px}
  .chip{display:inline-flex;align-items:center;gap:.35em;
        padding:.28rem .6rem;border-radius:.9rem;border:1px solid;
        font-size:.87rem;line-height:1;white-space:nowrap}
  .chip-sky{border-color:rgba(125,160,255,.35);color:#c7d2fe;background:rgba(125,160,255,.08)}
  .chip-emerald{border-color:rgba(16,185,129,.35);color:#bbf7d0;background:rgba(16,185,129,.08)}
  .list-item{border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:12px 14px}
  .meta{color:#9aa4b2;font-size:.9rem}
</style>

<h1 class="text-lg font-semibold mb-3">💵 現金台帳</h1>

<!-- フィルタのサマリーなどはお手元のままでOK -->

<div id="historyContainer">
  {% include "cash/_history_list.html" with page=page params=params %}
</div>

<!-- 追加読み込み（HTMX） -->
{% if page.has_next %}
  <div
    hx-get="{% url 'cash_history_page' %}?page={{ page.next_page_number }}&{{ params.urlencode }}"
    hx-trigger="revealed"
    hx-swap="afterend"
    class="text-center text-slate-400 py-4">
    読み込み中…
  </div>
{% endif %}
{% endblock %}