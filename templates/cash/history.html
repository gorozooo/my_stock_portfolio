{% extends "base.html" %}
{% load humanize %}
{% block title %}現金台帳{% endblock %}

{% block content %}
<style>
  /* filter */
  .fwrap{border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.04);
         border-radius:12px;padding:10px}
  .grid6{display:grid;grid-template-columns:repeat(6,1fr);gap:6px}
  .ctl{display:flex;flex-direction:column;gap:2px}
  .ctl label{font-size:10px;color:#94a3b8}
  .ipt,.sel,.btn{width:100%;padding:6px 7px;border-radius:8px;border:1px solid rgba(255,255,255,.12);
                 background:rgba(255,255,255,.06);color:#e5e7eb;font-size:12px;line-height:1.1}
  .btn{background:rgba(255,255,255,.10)}
  .btn.ghost{background:transparent;border-color:rgba(255,255,255,.12)}
  /* summary pills */
  .sum{display:flex;flex-wrap:wrap;gap:8px;margin:8px 0 10px}
  .pill{padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.16);
        background:rgba(255,255,255,.05);font-size:12px;color:#cbd5e1}

  /* card */
  .card{border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.04);
        border-radius:14px;padding:12px 14px;margin-bottom:10px}
  .amt{font-size:20px;font-weight:800}
  .meta{margin-top:4px;font-size:12px;color:#94a3b8}
  .memo{margin-top:3px;font-size:12px;color:#cbd5e1}
  .badge{display:inline-flex;align-items:center;gap:6px;padding:5px 10px;border-radius:999px;
         border:1px solid rgba(125,160,255,.35);background:rgba(125,160,255,.10);font-size:12px}
  .badge.g{border-color:rgba(16,185,129,.35);background:rgba(16,185,129,.10)}
  .acts{margin-top:8px;display:flex;justify-content:flex-end;gap:8px}
  .acts a,.acts button{padding:6px 10px;font-size:12px;border-radius:10px;border:1px solid rgba(255,255,255,.2)}
</style>

<h1 class="text-base font-semibold mb-2">💵 現金台帳</h1>

<form method="get" class="fwrap">
  <div class="grid6">
    <div class="ctl" style="grid-column:span 3;">
      <label>証券会社</label>
      <select name="broker" class="sel">
        {% with b=params.broker|default:"ALL" %}
          <option value="ALL"  {% if b == "ALL" %}selected{% endif %}>すべて</option>
          <option value="楽天" {% if b == "楽天" %}selected{% endif %}>楽天</option>
          <option value="松井" {% if b == "松井" %}selected{% endif %}>松井</option>
          <option value="SBI" {% if b == "SBI" %}selected{% endif %}>SBI</option>
        {% endwith %}
      </select>
    </div>
    <div class="ctl" style="grid-column:span 3;">
      <label>種別</label>
      <select name="kind" class="sel">
        {% with k=params.kind|default:"ALL" %}
          <option value="ALL"      {% if k == "ALL" %}selected{% endif %}>すべて</option>
          <option value="DEPOSIT"  {%