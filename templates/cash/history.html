{% extends "base.html" %}
{% load humanize %}
{% block title %}ğŸ’µ ç¾é‡‘å°å¸³{% endblock %}

{% block content %}
<h1>ğŸ’µ ç¾é‡‘å°å¸³</h1>

<form method="get" style="margin-bottom: 1em;">
  <select name="broker">
    <option value="ALL">ã™ã¹ã¦</option>
    <option value="æ¥½å¤©" {% if params.broker == "æ¥½å¤©" %}selected{% endif %}>æ¥½å¤©</option>
    <option value="æ¾äº•" {% if params.broker == "æ¾äº•" %}selected{% endif %}>æ¾äº•</option>
    <option value="SBI" {% if params.broker == "SBI" %}selected{% endif %}>SBI</option>
  </select>
  <button type="submit">é©ç”¨</button>
  <a href="{% url 'cash_history' %}">ã‚¯ãƒªã‚¢</a>
</form>

{% if summary %}
  <div>
    ğŸ’°åˆè¨ˆ {{ summary.total|intcomma }}å††ã€€
    å…¥é‡‘ {{ summary.deposit|intcomma }}å††ã€€
    å‡ºé‡‘ {{ summary.withdraw|intcomma }}å††
  </div>
{% endif %}

<hr>

{% for r in page.object_list %}
  <div style="padding:10px; margin:8px 0; border:1px solid rgba(255,255,255,0.2); border-radius:8px;">
    <div style="font-weight:bold; font-size:18px;">{{ r.amount|intcomma }} å††</div>
    <div style="font-size:12px; color:#aaa;">
      {{ r.at }} ï½œ {{ r.account.broker }} ï½œ 
      {% if r.kind == r.Kind.DEPOSIT %}å…¥é‡‘{% elif r.kind == r.Kind.WITHDRAW %}å‡ºé‡‘
      {% elif r.kind == r.Kind.XFER_IN %}æŒ¯æ›¿(å…¥){% elif r.kind == r.Kind.XFER_OUT %}æŒ¯æ›¿(å‡º)
      {% else %}ãã®ä»–{% endif %}
    </div>
    {% if r.src_badge %}
      <div style="font-size:12px; color:#7ef;">
        ã€{{ r.src_badge.kind }}ã€‘ {{ r.src_badge.label }}
      </div>
    {% endif %}
    {% if r.memo %}
      <div style="font-size:12px; color:#ccc;">{{ r.memo }}</div>
    {% endif %}
  </div>
{% empty %}
  <p>è©²å½“ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
{% endfor %}

<!-- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ -->
<div style="text-align:center; margin-top:10px;">
  {% if page.has_previous %}
    <a href="?page={{ page.previous_page_number }}">â† å‰ã¸</a>
  {% endif %}
  <span>ãƒšãƒ¼ã‚¸ {{ page.number }} / {{ page.paginator.num_pages }}</span>
  {% if page.has_next %}
    <a href="?page={{ page.next_page_number }}">æ¬¡ã¸ â†’</a>
  {% endif %}
</div>
{% endblock %}