{% load humanize %}
{% for r in page.object_list %}
  <div class="mb-3" style="border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:12px 14px">
    <div class="flex items-start justify-between gap-3">
      <!-- 左：金額とメタ -->
      <div>
        <div class="text-2xl font-extrabold">{{ r.amount|intcomma }} 円</div>
        <div class="text-slate-400 mt-1" style="font-size:.92rem">
          {{ r.at }} ｜ {{ r.account.broker }} ｜ 種別：
          {% if r.kind == r.Kind.DEPOSIT %}入金{% elif r.kind == r.Kind.WITHDRAW %}出金
          {% elif r.kind == r.Kind.XFER_IN %}振替(入){% elif r.kind == r.Kind.XFER_OUT %}振替(出)
          {% else %}その他{% endif %}
        </div>
        {% if r.memo %}<div class="text-slate-300 mt-1">{{ r.memo }}</div>{% endif %}
      </div>

      <!-- 右：元データバッジ（簡潔表示） -->
      <div class="text-right shrink-0">
        {% if r.source_type == r.SourceType.DIVIDEND %}
          <span class="inline-flex items-center px-2 py-1 rounded-full"
                style="border:1px solid rgba(125,160,255,.35);color:#c7d2fe;background:rgba(125,160,255,.08);font-size:.85rem;">
            配当&nbsp;DIV:{{ r.source_id }}
          </span>
        {% elif r.source_type == r.SourceType.REALIZED %}
          <span class="inline-flex items-center px-2 py-1 rounded-full"
                style="border:1px solid rgba(16,185,129,.35);color:#bbf7d0;background:rgba(16,185,129,.08);font-size:.85rem;">
            実損&nbsp;REAL:{{ r.source_id }}
          </span>
        {% endif %}

        <!-- 編集/削除 -->
        <div class="mt-2 flex justify-end gap-2">
          <a href="{% url 'cash_ledger_edit' r.id %}" class="px-3 py-1.5 rounded border border-slate-500/40">編集</a>
          <form method="post" action="{% url 'cash_ledger_delete' r.id %}">
            {% csrf_token %}
            <button class="px-3 py-1.5 rounded border border-rose-500/40 text-rose-200">削除</button>
          </form>
        </div>
      </div>
    </div>
  </div>
{% empty %}
  <div class="card p-4 text-slate-400">該当データがありません。</div>
{% endfor %}