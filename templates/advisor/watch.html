{% extends "base.html" %}
{% load static %}

{% block title %}ウォッチリスト{% endblock %}

{% block content %}
<header class="watch-header">
  <div class="wrap">
    <h1>📝 ウォッチリスト</h1>
    <div class="search-box">
      <input id="q" type="search" inputmode="search" placeholder="銘柄名・コードで検索" aria-label="検索">
      <span id="hit" class="hit">0件</span>
    </div>
  </div>
</header>

<main class="watch-container" role="main">
  <section id="list" class="watch-list" aria-live="polite"></section>
  <button id="more" class="btn more" hidden>もっと見る</button>
</main>

<!-- ボトムシート（詳細＆メモ） -->
<section id="sheet" class="sheet" hidden aria-hidden="true" aria-label="銘柄詳細">
  <div class="sheet-backdrop" id="sh-close" aria-hidden="true"></div>
  <div class="sheet-body" role="dialog" aria-modal="true">
    <div class="sheet-drag"></div>
    <h2 id="sh-title" class="sh-title">銘柄（コード）</h2>

    <div class="chips">
      <span id="sh-theme" class="chip"></span>
      <span id="sh-ai" class="chip"></span>
    </div>

    <!-- ★ Boardカードの中身HTMLをそのまま差し込む置き場 -->
    <div id="sh-boardcard" class="boardcard-host"></div>

    <!-- 目標/損切りはシートでも表示を維持（BoardHTMLと重複しないよう補助表示） -->
    <div class="targets">
      <div id="sh-tp" class="target">🎯 —</div>
      <div id="sh-sl" class="target">🛑 —</div>
    </div>

    <label class="memo-label" for="sh-note">自分メモ</label>
    <textarea id="sh-note" rows="4" placeholder="メモを書いて保存…"></textarea>

    <div class="sheet-actions">
      <button id="sh-save" class="btn primary">保存</button>
      <button id="sh-hide" class="btn danger">非表示にする</button>
      <button id="sh-close" class="btn ghost">閉じる</button>
    </div>
  </div>
</section>

<!-- Boardカードの見た目を再現するためのCSS（先に読み込み） -->
<link rel="stylesheet" href="{% static 'advisor/board.css' %}?v=1" />
<!-- ウォッチ画面のCSS（必要に応じて上書き） -->
<link rel="stylesheet" href="{% static 'advisor/watch.css' %}?v=4" />

<script src="{% static 'advisor/watch.js' %}?v=13"></script>
{% endblock %}