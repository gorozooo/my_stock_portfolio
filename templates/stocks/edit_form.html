<form method="post" action="{% url 'stock_edit' stock.id %}" novalidate>
  {% csrf_token %}

  {# 編集対象外だが送るなら保持 #}
  <input type="hidden" name="name" value="{{ stock.name }}">
  <input type="hidden" name="ticker" value="{{ stock.ticker }}">

  <div class="form-grid" style="display:grid; grid-template-columns:1fr; gap:12px;">

    {# 株数 #}
    <div class="form-group">
      <label for="edit-shares">株数</label>
      <input id="edit-shares"
             name="shares"
             type="number"
             inputmode="numeric"
             min="0"
             step="1"
             value="{{ stock.shares }}"
             placeholder="例: 100"
             required>
    </div>

    {# 取得単価 #}
    <div class="form-group">
      <label for="edit-unit_price">取得単価（円）</label>
      <input id="edit-unit_price"
             name="unit_price"
             type="number"
             inputmode="numeric"
             min="0"
             step="1"
             value="{{ stock.unit_price }}"
             placeholder="例: 1,500"
             required>
    </div>

    {# 口座区分（model: account_type / choices: 現物・信用・NISA） #}
    <div class="form-group">
      <label for="edit-account-type">口座区分</label>
      <select id="edit-account-type" name="account_type" required>
        <option value="現物" {% if stock.account_type == "現物" %}selected{% endif %}>現物</option>
        <option value="信用" {% if stock.account_type == "信用" %}selected{% endif %}>信用</option>
        <option value="NISA" {% if stock.account_type == "NISA" %}selected{% endif %}>NISA</option>
      </select>
    </div>

    <div class="form-group">
      <label for="edit-position">ポジション</label>
      <select id="edit-position" name="position" required>
        <option value="買い" {% if stock.position == "買い" or stock.position == "買" %}selected{% endif %}>買い</option>
        <option value="売り" {% if stock.position == "売り" or stock.position == "売" %}selected{% endif %}>売り</option>
      </select>
    </div>

    {# メモ（model: note） #}
    <div class="form-group">
      <label for="edit-note">メモ</label>
      <textarea id="edit-note"
                name="note"
                rows="3"
                placeholder="自由入力 (例: 長期保有予定 / 配当狙い)">{% if stock.note %}{{ stock.note }}{% endif %}</textarea>
    </div>

  </div>

  <div class="modal-actions" style="display:flex; gap:12px; justify-content:center; margin-top:16px;">
    <button type="submit" class="modal-action-btn">保存</button>
    <a href="{% url 'stock_list' %}" class="modal-action-btn negative"
       style="text-decoration:none; display:inline-flex; align-items:center; justify-content:center;">キャンセル</a>
  </div>
</form>