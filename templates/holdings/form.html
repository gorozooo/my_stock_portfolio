{% extends "base.html" %}
{% block title %}{% if mode == "edit" %}保有を編集{% else %}保有を追加{% endif %}{% endblock %}

{% block content %}
<div class="pnl">
  <h1>{% if mode == "edit" %}保有を編集{% else %}保有を追加{% endif %}</h1>

  <form method="post" class="mt-4 card" style="display:grid;gap:12px;padding:14px">
    {% csrf_token %}

    <div class="fi">
      <label>ティッカー</label>
      {{ form.ticker }}
    </div>
    <div class="fi">
      <label>名称</label>
      {{ form.name }}
    </div>

    <div class="fi" style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px">
      <div>
        <label>証券会社</label>
        {{ form.broker }}
      </div>
      <div>
        <label>口座</label>
        {{ form.account }}
      </div>
      <div>
        <label>方向</label>
        {{ form.side }}
      </div>
    </div>

    <div class="fi" style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px">
      <div>
        <label>数量</label>
        {{ form.quantity }}
      </div>
      <div>
        <label>平均取得単価</label>
        {{ form.avg_cost }}
      </div>
      <div>
        <label>保有開始日</label>
        {{ form.opened_at }}
      </div>
    </div>

    {% if form.errors %}
      <div class="rounded-lg" style="padding:10px;border:1px solid #ff9aa9;background:#2b1f24;color:#ffd1d1">
        入力に誤りがあります。確認してください。
      </div>
    {% endif %}

    <div class="mt-2" style="display:flex;gap:10px">
      <button type="submit" class="px-3 py-2 rounded-lg"
              style="border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);">
        保存
      </button>
      <a href="{% url 'holding_list' %}" class="px-3 py-2 rounded-lg"
         style="border:1px solid rgba(255,255,255,.14);">戻る</a>
    </div>
  </form>
</div>
{% endblock %}