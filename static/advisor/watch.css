:root{
  --bg:#0b0f1a; --panel:rgba(255,255,255,.06); --panel-strong:rgba(255,255,255,.10);
  --text:#f1f5f9; --green:#16a34a; --red:#ef4444; --yellow:#eab308; --blue:#2563eb;
  --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.35);
}

.watch-header{position:sticky;top:0;background:linear-gradient(to bottom, rgba(11,15,26,.85), rgba(11,15,26,.45));backdrop-filter:blur(10px);z-index:10;border-bottom:1px solid rgba(255,255,255,.06)}
.watch-header .wrap{max-width:720px;margin:0 auto;padding:12px 16px;color:var(--text)}
.search-box{display:flex;align-items:center;gap:10px}
.search-box input{flex:1;border-radius:12px;border:1px solid var(--panel-strong);background:var(--panel);padding:10px 12px;color:var(--text)}
.hit{opacity:.85}

.watch-container{max-width:720px;margin:0 auto;padding:14px 16px 24px}
.watch-list{display:grid;gap:12px}

/* --- カード（board準拠の見た目） --- */
.wcard{background:var(--panel);border:1px solid var(--panel-strong);border-radius:var(--radius);box-shadow:var(--shadow);padding:14px;color:var(--text)}
.w-title{font-weight:800;display:flex;align-items:center;gap:8px}
.w-seg{font-size:12px;opacity:.9;margin-top:2px}
.w-badges{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.badge-chip{display:inline-flex;gap:6px;align-items:center;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:999px;padding:6px 10px;font-size:12px}
.badge-chip.blue{background:rgba(37,99,235,.14);border-color:rgba(37,99,235,.32);color:#cfe0ff}
.w-overall{display:flex;gap:16px;align-items:center;margin:8px 0 6px}
.w-action{margin:8px 0 6px;font-weight:700;color:var(--green)}
.w-list{margin:8px 0 10px;padding-left:16px}
.w-targets{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:10px}
.w-target{background:rgba(255,255,255,.05);border:1px dashed rgba(255,255,255,.18);padding:8px 10px;border-radius:12px;font-size:13px}
.w-meter-wrap{margin-top:4px}
.w-meter{height:10px;background:rgba(255,255,255,.08);border-radius:999px;overflow:hidden}
.w-meter>i{display:block;height:100%;background:linear-gradient(90deg,#60a5fa,#34d399);width:45%}
.w-meter-cap{font-size:12px;opacity:.85;margin-top:4px}

/* --- ボトムシート --- */
.sheet{position:fixed;inset:0;z-index:2000;display:block}
.sheet[hidden]{display:none}
.sheet-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.45);backdrop-filter:blur(2px)}
.sheet-body{
  position:absolute;left:0;right:0;bottom:0;
  max-height:92vh; /* ← 画面の上まで出し過ぎない */
  border-top-left-radius:18px;border-top-right-radius:18px;
  background:linear-gradient(to bottom, rgba(11,15,26,.98), rgba(11,15,26,.98));
  box-shadow:0 -12px 30px rgba(0,0,0,.45);
  overflow-y:auto; -webkit-overflow-scrolling:touch;
  padding:8px 14px 140px; /* ← 下ボタン分の余白を常に確保 */
}
.sheet-drag{width:64px;height:6px;border-radius:999px;background:rgba(255,255,255,.3);margin:8px auto}

.detail-card{margin-top:6px}
.memo-wrap{margin:12px 0 0}
.memo-title{margin:8px 0 6px;opacity:.9}
#sh-note{width:100%;border-radius:12px;border:1px solid var(--panel-strong);background:var(--panel);padding:10px 12px;color:var(--text)}

/* 下部操作を常に見えるように固定（かつ安全域を確保） */
.sheet-actions{
  position: sticky;
  /* ← ここを小さくすると“下”に寄る。まずは +8px で様子見、もっと下げたいなら 0 に */
  bottom: calc(env(safe-area-inset-bottom, 0px) + 0px);

  display: flex;
  gap: 10px;
  margin-top: 12px;

  /* 下側の余白を小さく（=さらに下へ） */
  padding: 8px 0;

  background: linear-gradient(180deg, transparent, rgba(11,15,26,.95) 35%);
  backdrop-filter: blur(6px);
  z-index: 50;
}
.btn{flex:1;padding:12px;border-radius:12px;border:1px solid var(--panel-strong);background:rgba(255,255,255,.06);color:var(--text);font-weight:700;text-align:center}
.btn.primary{background:linear-gradient(180deg,rgba(22,163,74,.35),rgba(22,163,74,.18));border-color:rgba(22,163,74,.5)}
.btn.danger{background:linear-gradient(180deg,rgba(239,68,68,.18),rgba(239,68,68,.08));border-color:rgba(239,68,68,.45)}
.btn.more{width:100%;margin-top:12px}