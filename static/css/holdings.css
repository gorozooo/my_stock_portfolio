/* ===== Reset/Vars ===== */
:root{
  --card-bg: rgba(16,23,35,.72);
  --stroke: rgba(255,255,255,.08);
  --muted: #9aa7bd;
  --pos: #22c55e;
  --neg: #ef4444;
  --chip-bg: rgba(255,255,255,.06);
  --chip-bd: rgba(255,255,255,.14);
  --pill-bg: rgba(255,255,255,.08);
  --pill-hi: rgba(34,197,94,.10);
  --pill-hi-neg: rgba(239,68,68,.10);
  --radius: 16px;
  --gap: 10px;
  --pad: 12px;         /* ★全体をコンパクトにするキー */
  --font-lg: 18px;     /* 見出し */
  --font-v: 17px;      /* 数字 */
  --font-k: 12px;      /* ラベル */
}

/* 上部 */
.page-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}

/* リストラッパ */
.stack{display:flex;flex-direction:column;gap:12px}

/* ===== Card ===== */
.neo{
  position:relative;
  border:1px solid var(--stroke);
  border-radius:var(--radius);
  background:var(--card-bg);
  box-shadow:0 6px 20px rgba(0,0,0,.18);
  overflow:hidden;
}

/* スワイプアクション（そのまま） */
.actions{
  --open-w: 200px;
  position:absolute; inset:auto 0 0 auto; top:0; right:calc(var(--open-w)*-1);
  width:var(--open-w); z-index:2; display:flex; align-items:stretch; justify-content:center;
  transition:right .18s ease-out; pointer-events:none; background:none;
}
.row.is-open .actions{ right:0; pointer-events:auto; }
.action-panel{ display:flex; gap:8px; width:100%; height:100%; padding:8px 10px 8px 8px; }
.action-panel .item{
  flex:1; display:flex; align-items:center; justify-content:center;
  font-weight:700; font-size:12px; border-radius:12px;
  border:1px solid var(--chip-bd); background:var(--chip-bg); color:#e6ebff;
  touch-action:manipulation;
}
.action-panel .detail{ background:rgba(110,168,255,.18) }
.action-panel .edit  { background:rgba(0,255,209,.16) }
.action-panel .delete{ background:rgba(255,77,103,.20) }

/* 本文 */
.track{ padding: var(--pad); }

/* ヘッダー行（左：タイトル/チップ、右：スパーク） */
.head{ display:flex; align-items:center; gap:12px; }
.title{ flex:1; min-width:0; display:flex; flex-direction:column; gap:6px; }
.name{
  font-weight:800; font-size:var(--font-lg); line-height:1.1;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.chips{ display:flex; gap:6px; flex-wrap:wrap; }
.chip{
  font-size:11px; padding:3px 8px; border-radius:999px;
  border:1px solid var(--chip-bd); background:var(--chip-bg); color:#dbe3f4;
}
.chip.code{ color:#c7d2fe; border-color:rgba(110,168,255,.35); background:rgba(110,168,255,.12) }
.chip.buy{  background:rgba(16,185,129,.16); border-color:rgba(16,185,129,.35) }
.chip.sell{ background:rgba(244,63,94,.16);  border-color:rgba(244,63,94,.35) }

.sparkbox{ flex:0 0 108px; display:flex; justify-content:flex-end; }
.spark{ width:108px; height:30px; opacity:.95; filter:drop-shadow(0 0 2px rgba(0,0,0,.25)) }

/* メトリクスPill（4つ） */
.pillgrid{
  display:grid; grid-template-columns:repeat(4, minmax(0,1fr));
  gap:var(--gap);
  padding-top:10px; margin-top:10px;
  border-top:1px dashed var(--stroke);
}
.pill{
  padding:8px 10px; border-radius:12px;
  background:var(--pill-bg); border:1px solid var(--chip-bd);
  display:flex; flex-direction:column; gap:2px; min-width:0;
}
.pill.hi{ background:var(--pill-hi); border-color:rgba(34,197,94,.35) }
.pill.hi.neg{ background:var(--pill-hi-neg); border-color:rgba(239,68,68,.35) }

.pill .k{ font-size:var(--font-k); color:var(--muted); line-height:1; }
.pill .v{
  font-size:var(--font-v); line-height:1.1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  font-variant-numeric:tabular-nums;
}

/* 詳細（デフォルト非表示） */
.more{ display:none; padding-top:8px; }
.row.show-detail .more{ display:block; }
.moregrid{ display:grid; grid-template-columns:repeat(2,1fr); gap:10px; margin-top:6px }
.moregrid .kv{ display:flex; justify-content:space-between; gap:8px; }
.moregrid .k{ color:var(--muted); font-size:12px }
.moregrid .v{ font-size:14px }

/* さらにコンパクトにするミニ端末 */
@media (max-width:380px){
  :root{ --pad:10px; --gap:8px; --font-lg:17px; --font-v:16px; }
  .sparkbox{ flex-basis:96px }
  .spark{ width:96px; height:28px }
}