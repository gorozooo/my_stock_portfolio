:root{
  --bg:#0b0f1a; --fg:#e8eeff; --muted:#94a3b8;
  --glass:rgba(255,255,255,.06); --line:rgba(255,255,255,.14);
  --pri:#6ea8ff; --acc:#00ffd1; --good:#26d07c; --bad:#ff5b6e;
  --radius:14px;
}
body{ background: radial-gradient(1200px 600px at 20% -10%, #132035 0%, #0b0f1a 55%) fixed; color:var(--fg); }
.glass{
  border-radius: var(--radius);
  background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
  border:1px solid var(--line);
  backdrop-filter: blur(14px);
  box-shadow: 0 8px 40px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.06);
}
section{ margin:14px 12px; }

/* ===== AIヘッダー ===== */
.ai-header{ padding:14px; }
.ai-title{ font-weight:700; letter-spacing:.2px; margin-bottom:6px; }
.ai-note{ margin:6px 0 8px; color:var(--fg); }
.ai-actions{ margin:0; padding-left:18px; color:var(--muted); }
.btn.ghost{
  border:1px solid var(--pri); color:var(--pri); background:transparent;
  padding:8px 12px; border-radius:10px; margin-right:8px;
}

/* ===== KPI ===== */
.kpi-grid{
  display:grid; grid-template-columns:1fr 1fr; gap:10px; padding:0 12px;
}
.kpi-card{
  border-radius:12px; padding:12px; background:var(--glass); border:1px solid var(--line);
  display:flex; flex-direction:column; justify-content:center; min-height:88px; /* 高さを揃える */
}
.kpi-label{ color:var(--muted); font-size:.85rem; }
.kpi-value{ font-size:1.3rem; font-weight:700; margin-top:4px; }
.kpi-value.pos{ color:var(--good); }
.kpi-value.neg{ color:var(--bad); }
.kpi-sub{ font-size:.85rem; margin-top:4px; }
.kpi-sub.muted{ color:var(--muted); }

/* === 2段式 ROI カード === */
.roi-card{ gap:6px; }
.roi-card .roi-row{
  display:flex; align-items:center; justify-content:space-between;
  padding:6px 8px; border-bottom:1px dashed rgba(255,255,255,.08);
  border-radius:10px;
}
.roi-card .roi-row:last-child{ border-bottom:0 }
.roi-card .eval{ background:linear-gradient(90deg, rgba(38,208,124,.12), transparent) }
.roi-card .liquid{ background:linear-gradient(90deg, rgba(80,160,255,.12), transparent) }
.roi-card .roi-label{ color:var(--muted); font-size:.9rem }
.roi-card .roi-value{ font-weight:800; font-size:1.2rem }
.roi-card .eval .roi-value.pos{ color:var(--good) }
.roi-card .eval .roi-value.neg{ color:var(--bad) }
/* 現金ROIはブルーで統一表示 */
.roi-card .liquid .roi-value{ color:#5db1ff }
.roi-card .roi-foot{
  margin-top:2px; font-size:.85rem; color:var(--muted);
  display:flex; gap:8px; align-items:center;
}
.roi-card .roi-gap{
  margin-left:auto; font-size:.8rem; padding:2px 6px; border-radius:999px;
  background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12)
}

/* ▼ モバイルでは ROI カードを横幅いっぱいにしてバランス最適化 */
.kpi-grid .roi-card{ grid-column:1 / -1; }

/* ===== 今すぐ現金化（カード） ===== */
.liquidation, .liquid{ padding:12px; }
.liq-head, .liquid-head{ display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
.liq-head .title, .liquid-head .title{ font-weight:700; }
.chip{
  background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12);
  padding:4px 8px; border-radius:999px; font-size:.85rem;
}
.liq-total, .liquid-hero .liquid-amount{ font-size:1.8rem; font-weight:800; letter-spacing:.2px; }
.liq-total{ margin:6px 0 2px }
.liquid-caption, .kpi-sub{ opacity:.8 }

.liq-rows{ list-style:none; margin:8px 0 10px; padding:0 }
.liq-rows li{ display:flex; justify-content:space-between; padding:4px 0 }
.liq-rows li.neg strong{ color:#ff6d6d }

.liq-gauge-wrap{ margin-top:6px }
.liq-gauge{
  position:relative; height:10px; border-radius:999px; overflow:hidden;
  background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08);
}
.liq-gauge .spot{ height:100%; background:linear-gradient(90deg,#2dd79b,#49e28a); width:40% }
.liq-gauge .margin{ height:100%; background:linear-gradient(90deg,#ff8a8a,#ff6d6d); float:right; width:60% }
.liq-meta{ display:flex; justify-content:space-between; margin-top:4px; font-size:.85rem; opacity:.9 }

/* ===== セクター横スク ===== */
.sector-strip{ padding:12px; }
.strip-title{ margin-bottom:8px; color:var(--muted); font-size:.95rem; }
.strip-scroll{ display:flex; gap:10px; overflow-x:auto; padding-bottom:4px; }
.sector-chip{
  min-width:160px; padding:10px; border-radius:12px; background:var(--glass); border:1px solid var(--line);
}
.sec-name{ font-weight:600; margin-bottom:4px; }
.sec-meta{ display:flex; gap:8px; align-items:center; }
.sec-meta .mv{ color:var(--muted); font-size:.85rem; }
.sec-meta .rate{ font-weight:700; }
.sec-meta .rate.pos{ color:var(--good); }
.sec-meta .rate.neg{ color:var(--bad); }

/* ===== キャッシュフロー / ストレス ===== */
.cash{ padding:12px; }
.cash-head{ margin-bottom:8px; color:var(--muted); }
.stress{ padding:12px; }
.stress-head{ display:flex; justify-content:space-between; margin-bottom:8px; }
#stressSlider{ width:100%; }

/* ===== 次のアクション ===== */
.todo{ padding:12px; margin-bottom:80px; }
.todo-head{ margin-bottom:8px; color:var(--muted); }
.todo-list{ margin:0; padding-left:18px; }

/* ===== breakdown 共通（現物/信用） ===== */
.breakdown{padding:12px}
.dot{display:inline-block;width:10px;height:10px;border-radius:50%}
.dot.spot{background:#2dd79b}
.dot.margin{background:#ff6d6d}
.bd-gauge{position:relative;height:12px;border-radius:999px;overflow:hidden;
  background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);margin:6px 0 8px}
.bd-gauge-spot{height:100%;background:linear-gradient(90deg,#2dd79b,#49e28a)}
.bd-gauge-margin{height:100%;background:linear-gradient(90deg,#ff8a8a,#ff6d6d);float:right}
.bd-legend{display:flex;justify-content:space-between;opacity:.9;margin-bottom:8px}
.bd-donut-wrap{display:grid;grid-template-columns:180px 1fr;gap:16px;align-items:center}
.bd-donut{
  --spot:60; --margin:40;
  width:160px;height:160px;border-radius:50%;
  background: conic-gradient(#2dd79b calc(var(--spot)*1%), #ff6d6d 0);
  position:relative; box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);
}
.bd-donut::after{ content:""; position:absolute; inset:16px; border-radius:50%;
  background:rgba(0,0,0,.45); box-shadow:inset 0 0 0 1px rgba(255,255,255,.06); }
.bd-donut-hole{position:absolute; inset:16px; display:flex; flex-direction:column;
  align-items:center; justify-content:center; text-align:center; z-index:2}
.bd-donut-total{font-weight:700; font-size:1rem}
.bd-donut-caption{opacity:.8; font-size:.8rem; margin-top:2px}
.bd-legend-rows{list-style:none;margin:0;padding:0;display:grid;row-gap:4px}
.bd-legend-rows li{display:grid;grid-template-columns:16px 1fr auto;column-gap:8px;align-items:center}
.bd-legend-rows li.sub{opacity:.75;font-size:.95em}
@media (max-width: 460px){
  .bd-donut-wrap{grid-template-columns:1fr;justify-items:center}
  .bd-legend-rows{width:100%}
}

/* ===== レスポンシブ ===== */
@media (min-width: 960px){
  .kpi-grid{ grid-template-columns: repeat(4, 1fr); }
  .kpi-grid .roi-card{ grid-column:auto; } /* デスクトップでは1枠に戻す */
  section{ margin:16px auto; max-width:1100px; }
}