/* ===== 下タブ ===== */
.bottom-tab{
  position:fixed;left:0;right:0;bottom:0;z-index:9999;
  background:rgba(20,20,30,.85);backdrop-filter:blur(12px);
  border-top:1px solid rgba(255,255,255,.2);display:flex;justify-content:center
}
.tab-inner{display:flex;justify-content:space-around;width:100%;max-width:500px}
.tab-btn{
  flex:1;padding:10px 0;color:#fff;font-size:18px;background:none;border:0;
  display:flex;flex-direction:column;align-items:center;gap:2px;
  -webkit-user-select:none;user-select:none;-webkit-touch-callout:none
}
.tab-btn span{font-size:12px}

/* 長押し時のぷるぷる（haptic風） */
@keyframes pulse-wobble{
  0%{transform:translateY(0) scale(1)}
  30%{transform:translateY(-1px) scale(1.04)}
  60%{transform:translateY(0) scale(0.98)}
  100%{transform:translateY(0) scale(1)}
}
.tab-btn.shake div{animation:pulse-wobble .35s ease;}

/* ===== ボトムシート化したサブメニュー ===== */
.btm-mask{
  position:fixed;inset:0;z-index:10000;background:rgba(0,0,0,.35);
  opacity:0;pointer-events:none;transition:opacity .18s ease;
}
.btm-mask.show{opacity:1;pointer-events:auto}

/* iOSの下部バー/ノッチ対策 */
:root{ --safe-bottom: env(safe-area-inset-bottom, 0px); }

.submenu{
  position:fixed;left:0;right:0;bottom:0;z-index:10001;
  margin:0 auto;max-width:520px;background:rgba(22,24,33,.98);
  border-top-left-radius:16px;border-top-right-radius:16px;
  border:1px solid rgba(255,255,255,.08);border-bottom:0;
  box-shadow:0 -16px 40px rgba(0,0,0,.45);
  transform:translateY(110%); /* 初期は画面外 */
  transition:transform .22s cubic-bezier(.2,.9,.2,1);
  padding:8px 8px calc(12px + var(--safe-bottom));
  max-height:70vh;overflow:auto;backdrop-filter:blur(10px);
  -webkit-user-select:none;user-select:none;-webkit-touch-callout:none
}
.submenu.show{transform:translateY(0)}

.submenu .grabber{
  width:40px;height:4px;border-radius:999px;margin:6px auto 10px;
  background:rgba(255,255,255,.22)
}
.submenu .section{padding:6px 10px;color:#a5b4fc;font-size:12px;opacity:.9}
.submenu .submenu-item{
  display:flex;align-items:center;gap:10px;width:100%;
  text-align:left;padding:12px 14px;margin:4px 0;
  background:none;color:#fff;border:0;border-radius:12px;font-size:15px
}
.submenu .submenu-item .ico{font-size:18px;min-width:20px;text-align:center}

/* 色分け（tone） */
.submenu .tone-add    { background:rgba(16,185,129,.12); }
.submenu .tone-add:hover{ background:rgba(16,185,129,.22); }
.submenu .tone-info   { background:rgba(59,130,246,.10); }
.submenu .tone-info:hover{ background:rgba(59,130,246,.20); }
.submenu .tone-action { background:rgba(234,179,8,.12); }
.submenu .tone-action:hover{ background:rgba(234,179,8,.22); }
.submenu .tone-danger { background:rgba(239,68,68,.12); color:#fecaca; }
.submenu .tone-danger:hover{ background:rgba(239,68,68,.22); }

/* iOS長押しの選択/コールアウト無効化 & ハイライト消し */
.bottom-tab, .tab-inner, .tab-btn, .submenu, .submenu *{
  -webkit-user-select:none;user-select:none;
  -webkit-touch-callout:none;-webkit-tap-highlight-color:transparent;
}

/* 画面端切れ防止：メニュー自体は全幅ボトムシートなので不要だが、旧スタイル残留のため保険 */
.submenu{max-width: min(520px, 100vw)}

/* === Active Tab === */
.tab-btn { opacity:.7; transition: transform .18s ease, opacity .18s ease, filter .18s ease; }
.tab-btn.active {
  opacity:1;
  transform: translateY(-2px) scale(1.05);
  filter: drop-shadow(0 2px 8px rgba(99,102,241,.35)); /* 青系発光 */
}
.tab-btn.active div {
  background: linear-gradient(135deg,#60a5fa 0%,#a78bfa 50%,#f472b6 100%);
  -webkit-background-clip: text; background-clip: text; color: transparent;
}
.tab-btn.active span { color:#e2e8f0; font-weight:600; }
