/* すべてのサイズ計算を安定化（はみ出し防止の土台） */
*, *::before, *::after { box-sizing: border-box; }

:root{
  --ink:#111;              /* 本文色（濃いめ） */
  --muted:#4b5563;         /* 補助テキスト */
  --line:#e5e7eb;          /* 境界線 */
  --emph:#2563eb;          /* 強調色 */
  --glass:rgba(255,255,255,0.18);
  --glass-strong:rgba(255,255,255,0.26);
}

.cash-page { padding: 16px; background: transparent; color: var(--ink); }

/* メッセージ（読みやすく濃度調整） */
.msgs { list-style:none; padding:0; margin:0 0 10px; }
.msg { font-size:14px; padding:10px 12px; border-radius:8px; margin-bottom:6px; }
.msg.success { background:rgba(236,253,245,0.85); color:#065f46; }
.msg.error   { background:rgba(254,242,242,0.9); color:#7f1d1d; }

/* =========================
   タブ（枠なし／視認性アップ）
   ========================= */
.tabs {
  display:flex; gap:8px; margin-bottom:12px; overflow:auto;
  padding:2px;                 /* 外枠は廃止（枠線なし） */
  background: transparent;     /* ← 枠いらない指定 */
}
.tab {
  padding: 9px 14px;
  border-radius:999px;
  border:1px solid var(--line);
  background: rgba(255,255,255,0.9);   /* 読みやすい明度 */
  color: var(--ink);
  text-decoration:none;
  white-space:nowrap;
  font-size:14px;
  font-weight:600;                      /* 少し太字で視認性UP */
  transition: background .15s ease, color .15s ease, border-color .15s ease, transform .06s ease;
}
.tab:hover{
  background: rgba(255,255,255,1);
  border-color:#cbd5e1;
  transform: translateY(-1px);
}
.tab:focus-visible{
  outline: 3px solid rgba(37,99,235,.25);
  outline-offset: 2px;
}
.tab.active{
  background: var(--emph);
  border-color: var(--emph);
  color: #fff;
  box-shadow: 0 6px 16px rgba(37,99,235,0.25);
}

/* ========= 残高ピル ========= */
.summary.real { display:grid; grid-template-columns:1fr 1fr 1fr; gap:8px; }
@media (max-width: 480px) { .summary.real { grid-template-columns:1fr; } }

.pill {
  background: var(--glass-strong);
  border:1px solid rgba(255,255,255,0.55);
  border-radius:12px;
  padding:12px 14px;
  display:flex; align-items:baseline; justify-content:space-between;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}
.pill.focus { border-color:var(--emph); box-shadow:0 0 0 3px rgba(37,99,235,0.12); }
.pill .k { font-size:12px; color: var(--muted); }
.pill .v { font-size:18px; font-variant-numeric: tabular-nums; color: var(--ink); }

/* ========= カード（ガラス感強め） ========= */
.card {
  background: var(--glass);
  border:1px solid rgba(255,255,255,0.5);
  border-radius:14px;
  padding:16px; margin:12px 0;
  box-shadow: 0 10px 28px rgba(0,0,0,0.08);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  overflow: hidden;            /* はみ出し完全防止 */
}
.card * { max-width: 100%; }

/* 入出金モード */
.mode-row { display:flex; gap:10px; margin-bottom:10px; }
.mode {
  border:1px solid rgba(255,255,255,0.55);
  padding:8px 12px; border-radius:999px;
  background: var(--glass-strong);
  backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px);
  color: var(--ink);
}
.mode input { margin-right:6px; }

/* ========= 金額入力：はみ出しゼロ設計 ========= */
.amount-wrap { margin:8px 0 10px; }
.amt-display {
  display:flex; align-items:center; gap:8px;
  border:1px dashed var(--line); border-radius:12px; padding:12px 14px;
  width:100%;
  background: rgba(255,255,255,0.9);
}
.amt-display .currency { font-size:20px; color: var(--muted); }
#amount{
  flex:1 1 auto;
  min-width:0;                  /* はみ出し防止のキモ */
  border:none; outline:none;
  font-size:24px; font-weight:800;
  background: transparent;
  color: var(--ink);
  font-variant-numeric: tabular-nums;
  width:100%;
}

/* チップ */
.chips { display:flex; gap:8px; flex-wrap:wrap; margin-top:8px; }
.chip {
  border:1px solid var(--line);
  border-radius:999px; background: rgba(255,255,255,0.9);
  padding:6px 10px; font-size:12px; color: var(--ink);
}
.chip:hover{ background:#fff; }

/* ========= 2列→1列：はみ出しゼロ ========= */
.grid2 { display:grid; grid-template-columns:1fr 1fr; gap:10px; width:100%; }
@media (max-width: 480px) { .grid2 { grid-template-columns:1fr; } }

.field { display:flex; flex-direction:column; gap:6px; }
.field label { color: var(--muted); font-size:13px; }
.field input{
  width:100%; max-width:100%; min-width:0;
  border:1px solid var(--line);
  border-radius:10px; padding:12px; font-size:16px; line-height:1.2;
  background: rgba(255,255,255,0.95);  /* 入力欄は読みやすさ優先で白寄り */
  color: var(--ink);
  outline: none;
}
.field input:focus{
  border-color: var(--emph);
  box-shadow: 0 0 0 3px rgba(37,99,235,0.18);
}

/* ========= テンキー ========= */
.numpad { display:grid; grid-template-columns:repeat(3,1fr); gap:8px; margin-top:10px; }
.numpad button{
  padding:14px 0; font-size:18px; border-radius:12px;
  border:1px solid var(--line); background: rgba(255,255,255,0.92);
  color: var(--ink);
}
.numpad button:active{ transform: scale(0.98); }

/* 下部アクション（背景は極薄グラ） */
.sticky-actions {
  position: sticky; bottom: 0;
  background: linear-gradient(to top, rgba(255,255,255,0.12), rgba(255,255,255,0));
  padding: 12px 0 2px; margin-top:10px;
  display:flex; gap:10px;
}
.btn{
  width:100%; padding:12px; border-radius:10px; border:none;
  background: var(--emph); color:#fff; font-size:16px; font-weight:700;
}

/* ========= 履歴 ========= */
.history { margin:16px 0; }
.h-title { font-size:14px; color: var(--muted); margin:0 0 8px; }
.list { list-style:none; padding:0; margin:0; }
.row {
  display:grid; grid-template-columns: 96px 1fr 1fr; gap:8px; align-items:center;
  padding:10px 12px; border-bottom:1px solid #f3f4f6; font-size:14px;
  background: rgba(255,255,255,0.75);
  border-radius:10px;
}
.row + .row { margin-top:6px; }
.row .date { color: var(--muted); }
.row .type { font-variant-numeric: tabular-nums; text-align:right; color: var(--ink); }
.row .type.in  { color:#065f46; font-weight:700; }
.row .type.out { color:#991b1b; font-weight:700; }
.row .memo { overflow:hidden; text-overflow:ellipsis; white-space:nowrap; word-break: break-word; }
.empty { color:#9ca3af; padding:10px; }