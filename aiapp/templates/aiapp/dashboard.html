{% extends "base.html" %}
{% load static %}
{% block title %}AIãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ{% endblock %}

{% block head %}
<style>
  :root{
    --bg0:#050712;
    --bg1:#0b1026;
    --glass: rgba(255,255,255,.08);
    --line: rgba(255,255,255,.16);
    --fg:#e5e7eb;
    --sub:#a3a3a3;
    --a:#60a5fa;
    --b:#a78bfa;
    --c:#34d399;
    --warn:#fbbf24;
    --bad:#fb7185;
  }

  /* ====== èƒŒæ™¯ï¼šAIã£ã½ã„â€œæ·±åº¦â€ ====== */
  body{
    background:
      radial-gradient(900px 520px at 15% 10%, rgba(96,165,250,.20), transparent 55%),
      radial-gradient(900px 520px at 85% 12%, rgba(167,139,250,.16), transparent 55%),
      radial-gradient(900px 520px at 50% 92%, rgba(52,211,153,.14), transparent 55%),
      linear-gradient(180deg, var(--bg0), var(--bg1));
    color:var(--fg);
  }

  .ai-wrap{
    max-width:760px;
    margin:0 auto;
    padding:14px 14px 110px;
  }

  /* ====== AI Faceï¼ˆã‚³ã‚¢ï¼‰ ====== */
  .face{
    position:relative;
    border-radius:22px;
    padding:16px;
    border:1px solid var(--line);
    background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
    backdrop-filter: blur(14px);
    overflow:hidden;
  }

  /* ã‚°ãƒªãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ï¼ˆè¶…è–„ï¼‰ */
  .face:before{
    content:"";
    position:absolute; inset:-2px;
    background:
      linear-gradient(rgba(255,255,255,.06) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255,255,255,.06) 1px, transparent 1px);
    background-size: 22px 22px;
    opacity:.25;
    pointer-events:none;
  }

  /* ãƒ‘ãƒ«ã‚¹ï¼ˆç”Ÿå‘½æ„Ÿï¼‰ */
  .pulse{
    position:absolute; inset:-80px;
    background:
      radial-gradient(circle at 30% 20%, rgba(96,165,250,.24), transparent 42%),
      radial-gradient(circle at 70% 30%, rgba(167,139,250,.20), transparent 45%),
      radial-gradient(circle at 50% 80%, rgba(52,211,153,.18), transparent 42%);
    filter: blur(10px);
    animation: drift 10s ease-in-out infinite;
    pointer-events:none;
    opacity:.9;
  }
  @keyframes drift{
    0%{transform: translate3d(0,0,0) scale(1.02);}
    50%{transform: translate3d(-10px,8px,0) scale(1.06);}
    100%{transform: translate3d(0,0,0) scale(1.02);}
  }

  /* ä¸Šæ®µï¼šAIåï¼†çŠ¶æ…‹ */
  .top{
    position:relative;
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
    gap:12px;
  }
  .ai-name{
    font-size:18px;
    font-weight:800;
    letter-spacing:.04em;
    line-height:1.1;
  }
  .ai-meta{
    margin-top:6px;
    font-size:12px;
    color:rgba(229,231,235,.72);
  }

  .mode-switch{
    position:relative;
    display:flex;
    gap:8px;
    align-items:center;
  }
  .mode-pill{
    display:inline-flex;
    align-items:center;
    gap:8px;
    padding:10px 12px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.18);
    background: rgba(0,0,0,.18);
    color:var(--fg);
    text-decoration:none;
    font-weight:800;
    font-size:13px;
  }
  .mode-dot{
    width:10px;height:10px;border-radius:999px;
    background: var(--c);
    box-shadow:0 0 18px rgba(52,211,153,.45);
  }
  .mode-dot.demo{
    background: var(--warn);
    box-shadow:0 0 18px rgba(251,191,36,.45);
  }

  /* ====== ä¸­æ®µï¼šAIã®é¡”ï¼ˆä¸­å¿ƒï¼‰ ====== */
  .core{
    position:relative;
    margin-top:14px;
    display:grid;
    grid-template-columns: 1.1fr .9fr;
    gap:12px;
    align-items:stretch;
  }

  /* â€œAIã®ç›®â€ï¼šã‚ªãƒ¼ãƒ– */
  .orb{
    position:relative;
    border-radius:20px;
    border:1px solid rgba(255,255,255,.16);
    background: rgba(0,0,0,.18);
    min-height:190px;
    overflow:hidden;
  }

  .orb-inner{
    position:absolute; inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
  }

  .ring{
    width:150px;height:150px;border-radius:999px;
    border:1px solid rgba(255,255,255,.20);
    position:relative;
    box-shadow:
      0 0 40px rgba(96,165,250,.20),
      inset 0 0 40px rgba(167,139,250,.16);
    overflow:hidden;
  }
  .ring:before{
    content:"";
    position:absolute; inset:-30px;
    background:
      conic-gradient(from 90deg,
        rgba(96,165,250,.0),
        rgba(96,165,250,.38),
        rgba(167,139,250,.18),
        rgba(52,211,153,.22),
        rgba(96,165,250,.0));
    animation: spin 2.6s linear infinite;
    filter: blur(0.2px);
  }
  .ring:after{
    content:"";
    position:absolute; inset:12px;
    border-radius:999px;
    background:
      radial-gradient(circle at 35% 30%, rgba(255,255,255,.20), transparent 38%),
      radial-gradient(circle at 60% 65%, rgba(52,211,153,.14), transparent 48%),
      radial-gradient(circle at 50% 50%, rgba(0,0,0,.35), rgba(0,0,0,.55));
    border:1px solid rgba(255,255,255,.14);
  }
  @keyframes spin{ to{ transform: rotate(360deg);} }

  /* â€œAIã®å£°â€ï¼šãƒ†ãƒ­ãƒƒãƒ— */
  .speak{
    position:absolute;
    left:12px; right:12px; bottom:10px;
    border-radius:14px;
    padding:10px 12px;
    border:1px solid rgba(255,255,255,.14);
    background: rgba(255,255,255,.06);
    overflow:hidden;
  }
  .ticker{
    display:flex;
    gap:18px;
    white-space:nowrap;
    will-change: transform;
    animation: marquee 14s linear infinite;
    font-size:12px;
    color:rgba(229,231,235,.82);
  }
  .ticker b{ color:#fff; }
  @keyframes marquee{
    0%{ transform: translateX(0); }
    100%{ transform: translateX(-50%); }
  }

  /* å³å´ï¼š3ã¤ã®â€œæ„æ€æ±ºå®šã‚­ãƒ¼â€ */
  .keys{
    display:grid;
    grid-template-rows: repeat(3, 1fr);
    gap:10px;
  }
  .key{
    border-radius:18px;
    border:1px solid rgba(255,255,255,.16);
    background: rgba(0,0,0,.16);
    padding:12px;
    display:flex;
    flex-direction:column;
    justify-content:space-between;
    min-height:60px;
  }
  .key-top{
    display:flex;justify-content:space-between;align-items:center;
    gap:10px;
  }
  .key-name{
    font-weight:900;
    letter-spacing:.04em;
    font-size:12px;
    color:rgba(229,231,235,.88);
  }
  .key-tag{
    font-size:11px;
    padding:4px 8px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.14);
    background: rgba(255,255,255,.06);
    color:rgba(229,231,235,.82);
  }
  .bar{
    margin-top:10px;
    height:10px;
    border-radius:999px;
    background: rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.10);
    overflow:hidden;
  }
  .bar > i{
    display:block;height:100%;
    width: var(--w, 60%);
    background: linear-gradient(90deg, rgba(96,165,250,.75), rgba(167,139,250,.55), rgba(52,211,153,.60));
  }
  .key-hint{
    margin-top:8px;
    font-size:12px;
    color:rgba(229,231,235,.70);
    line-height:1.35;
  }

  /* ====== ä¸‹æ®µï¼šæ“ä½œå°ç·šï¼ˆAIã£ã½ã„3ãƒœã‚¿ãƒ³ï¼‰ ====== */
  .dock{
    margin-top:14px;
    display:grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap:10px;
  }
  .dock a{
    text-decoration:none;
    color:#fff;
    border-radius:16px;
    padding:12px 12px;
    border:1px solid rgba(255,255,255,.16);
    background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
    display:flex;
    flex-direction:column;
    gap:6px;
  }
  .dock .t{
    font-weight:900;
    letter-spacing:.02em;
    font-size:13px;
  }
  .dock .s{
    font-size:11px;
    color:rgba(229,231,235,.72);
    line-height:1.25;
  }

  /* å°ã•ãªæ³¨æ„ï¼šiPhoneã§æŠ¼ã—ã‚„ã™ã */
  .dock a:active{ transform: scale(.99); }

  /* ====== ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚«ãƒ¼ãƒ‰ ====== */
  .mini{
    margin-top:14px;
    border-radius:20px;
    border:1px solid rgba(255,255,255,.14);
    background: rgba(0,0,0,.18);
    padding:14px;
  }
  .mini .h{
    font-weight:900;
    letter-spacing:.03em;
    font-size:13px;
  }
  .mini .p{
    margin-top:8px;
    font-size:12px;
    color:rgba(229,231,235,.74);
    line-height:1.55;
  }
</style>
{% endblock %}

{% block content %}
<div class="ai-wrap">

  <div class="face">
    <div class="pulse"></div>

    <div class="top">
      <div>
        <div class="ai-name">AI PILOT // FACE</div>
        <div class="ai-meta">
          æœ€çµ‚æ›´æ–° {{ last_updated|date:"Y/m/d(D) H:i" }} ï¼ çŠ¶æ…‹: <b>åŒæœŸOK</b>
        </div>
      </div>

      <div class="mode-switch">
        <a class="mode-pill" href="{% url 'aiapp:toggle' %}">
          {% if mode == "DEMO" %}
            <span class="mode-dot demo"></span> DEMO
          {% else %}
            <span class="mode-dot"></span> LIVE
          {% endif %}
          â–½
        </a>
      </div>
    </div>

    <div class="core">
      <!-- å·¦ï¼šAIã®â€œç›®â€ -->
      <div class="orb">
        <div class="orb-inner">
          <div class="ring"></div>
        </div>

        <!-- AIã®â€œå£°â€ãƒ†ãƒ­ãƒƒãƒ—ï¼ˆä¸–ç•Œè¦³ï¼‰ -->
        <div class="speak">
          <div class="ticker">
            <span>ğŸ§  <b>åˆ¤æ–­ã®æ ¸</b>: ã„ã¾ã¯ã€Œç„¡ç†ã«å¢—ã‚„ã•ãšã€å‹ã¡ç­‹ã ã‘ã€</span>
            <span>âš¡ <b>å„ªå…ˆ</b>: ä¼¸ã³ã‚‹éŠ˜æŸ„ã‚ˆã‚Š â€œè² ã‘ãªã„å ´é¢â€ ã‚’å…ˆã«æ‹¾ã†</span>
            <span>ğŸ›¡ <b>åˆ¶å¾¡</b>: ã‚µã‚¤ã‚ºã¯å°ã•ãã€å¤±æ•—ã®å›æ•°ã‚’æ¸›ã‚‰ã™</span>
            <span>ğŸ§  <b>åˆ¤æ–­ã®æ ¸</b>: ã„ã¾ã¯ã€Œç„¡ç†ã«å¢—ã‚„ã•ãšã€å‹ã¡ç­‹ã ã‘ã€</span>
            <span>âš¡ <b>å„ªå…ˆ</b>: ä¼¸ã³ã‚‹éŠ˜æŸ„ã‚ˆã‚Š â€œè² ã‘ãªã„å ´é¢â€ ã‚’å…ˆã«æ‹¾ã†</span>
            <span>ğŸ›¡ <b>åˆ¶å¾¡</b>: ã‚µã‚¤ã‚ºã¯å°ã•ãã€å¤±æ•—ã®å›æ•°ã‚’æ¸›ã‚‰ã™</span>
          </div>
        </div>
      </div>

      <!-- å³ï¼šAIã®æ„æ€æ±ºå®š3ã‚­ãƒ¼ï¼ˆè¦–è¦šã§äººæ ¼ã‚’å‡ºã™ï¼‰ -->
      <div class="keys">
        <div class="key">
          <div class="key-top">
            <div class="key-name">è¿½éšï¼ˆTrendï¼‰</div>
            <div class="key-tag">ON</div>
          </div>
          <div class="bar"><i style="--w: 72%"></i></div>
          <div class="key-hint">é †å¼µã‚Šã¯â€œä¼¸ã³åˆ‡ã‚Šâ€ã‚’é¿ã‘ã¦æŠ¼ã—ç›®é™å®šã€‚</div>
        </div>

        <div class="key">
          <div class="key-top">
            <div class="key-name">é€†å¼µã‚Šï¼ˆMeanReversionï¼‰</div>
            <div class="key-tag">LOW</div>
          </div>
          <div class="bar"><i style="--w: 28%"></i></div>
          <div class="key-hint">è½ã¡ã‚‹ãƒŠã‚¤ãƒ•ã¯æ´ã¾ãªã„ã€‚æ¡ä»¶ãŒæƒã†ã¾ã§å¾…ã¤ã€‚</div>
        </div>

        <div class="key">
          <div class="key-top">
            <div class="key-name">é˜²å¾¡ï¼ˆDefenseï¼‰</div>
            <div class="key-tag">MED</div>
          </div>
          <div class="bar"><i style="--w: 48%"></i></div>
          <div class="key-hint">æåˆ‡ã‚Šå„ªå…ˆã€‚å‹ã¡ã‚ˆã‚Šâ€œæ’¤é€€ã®é€Ÿã•â€ã‚’è©•ä¾¡ã€‚</div>
        </div>
      </div>
    </div>

    <!-- è§¦ã‚‹å ´æ‰€ã‚’3ã¤ã«çµã£ã¦â€œAIã®é¡”â€ã«ã™ã‚‹ -->
    <div class="dock">
      <a href="{% url 'aiapp:picks' %}">
        <div class="t">â–¶ ä»Šæ—¥ã®10éŠ˜æŸ„</div>
        <div class="s">AIã®ææ¡ˆã ã‘è¦‹ã‚‹ã€‚ç†ç”±ã¯å¾Œã‹ã‚‰ã€‚</div>
      </a>
      <a href="{% url 'aiapp:behavior_dashboard' %}">
        <div class="t">â— ã‚ãªãŸã®ã‚¯ã‚»</div>
        <div class="s">å‹ã¡æ–¹/è² ã‘æ–¹ã‚’AIãŒå†å­¦ç¿’ã€‚</div>
      </a>
      <a href="{% url 'aiapp:picks_debug' %}">
        <div class="t">â‰¡ ãƒ‡ãƒãƒƒã‚°</div>
        <div class="s">è©•ä¾¡ãƒ»åæ˜ ãƒ»ãƒ‡ãƒ¼ã‚¿ã®æµã‚Œã‚’è¦‹ã‚‹ã€‚</div>
      </a>
    </div>
  </div>

  <!-- ä¸‹ã«1æšã ã‘ï¼šAIã£ã½ã„â€œå®£è¨€â€ -->
  <div class="mini">
    <div class="h">AIã®å®£è¨€ï¼ˆä»Šæ—¥ï¼‰</div>
    <div class="p">
      å‹ã¤ãŸã‚ã«å¢—ã‚„ã™ã‚“ã˜ã‚ƒãªã„ã€‚<b>è² ã‘ãªã„ãŸã‚ã«å‰Šã‚‹</b>ã€‚<br>
      ã ã‹ã‚‰ç§ã¯ã€ãƒ«ãƒ¼ãƒ«ã‚’ç ´ã‚‰ãªã„â€œå ´é¢â€ã ã‘ã‚’å‡ºã™ã€‚
    </div>
  </div>

</div>
{% endblock %}