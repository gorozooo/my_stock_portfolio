{% extends "base.html" %}

{% block title %}AI è¡Œå‹•ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰{% endblock %}

{% block head %}
<style>
  :root{
    --bg:#fff;
    --ink:#111827;
    --sub:#6b7280;
    --card:#ffffff;
    --line:rgba(17,24,39,.12);
    --shadow:0 10px 26px rgba(17,24,39,.10);

    --pink:#ff4aa2;
    --orange:#ff8a1f;
    --yellow:#ffe14d;
    --mint:#1ee6c1;
    --sky:#31c2ff;
    --grape:#7c4dff;

    --win:#16a34a;
    --lose:#ef4444;
    --flat:#64748b;

    --r:22px;
  }

  body{
    background:
      radial-gradient(circle at 12% 10%, rgba(49,194,255,.18), transparent 55%),
      radial-gradient(circle at 92% 0%, rgba(255,74,162,.18), transparent 60%),
      radial-gradient(circle at 10% 98%, rgba(255,225,77,.22), transparent 58%),
      #ffffff;
    color:var(--ink);
  }

  .wrap{
    max-width:940px;
    margin:0 auto;
    padding:14px 12px 92px;
  }

  /* ===== Poster ===== */
  .poster{
    position:relative;
    border-radius: calc(var(--r) + 10px);
    border:1px solid var(--line);
    background:var(--card);
    box-shadow: var(--shadow);
    padding:14px 14px 12px;
    overflow:hidden;
  }
  .poster::before{
    content:"";
    position:absolute;
    inset:-70px -70px auto auto;
    width:280px;height:280px;border-radius:50%;
    background:
      radial-gradient(circle at 30% 30%, rgba(255,74,162,.55), transparent 60%),
      radial-gradient(circle at 70% 70%, rgba(49,194,255,.45), transparent 62%),
      radial-gradient(circle at 35% 78%, rgba(255,225,77,.42), transparent 66%);
    transform: rotate(10deg);
    pointer-events:none;
  }
  .poster::after{
    content:"";
    position:absolute;
    inset:auto auto -120px -120px;
    width:320px;height:320px;border-radius:80px;
    background:
      radial-gradient(circle at 30% 30%, rgba(30,230,193,.50), transparent 62%),
      radial-gradient(circle at 70% 70%, rgba(255,138,31,.42), transparent 64%);
    transform: rotate(-10deg);
    pointer-events:none;
  }

  .posterTop{
    position:relative; z-index:1;
    display:flex; align-items:flex-start; justify-content:space-between;
    gap:10px;
  }

  .brand{
    display:flex; align-items:center; gap:10px;
    font-weight:1000;
    letter-spacing:.2px;
    font-size:18px;
  }
  .mark{
    width:40px;height:40px;border-radius:14px;
    display:grid;place-items:center;
    color:#fff;
    background: linear-gradient(135deg, var(--pink), var(--orange));
    box-shadow: 0 0 0 6px rgba(255,74,162,.12);
    font-size:18px;
  }

  .desc{
    position:relative; z-index:1;
    margin-top:8px;
    font-size:12px;
    font-weight:900;
    color: rgba(17,24,39,.70);
    line-height:1.6;
  }

  .chips{
    position:relative; z-index:1;
    margin-top:10px;
    display:flex; flex-wrap:wrap; gap:8px;
  }
  .chip{
    display:inline-flex; align-items:center; gap:8px;
    padding:7px 10px;
    border-radius:999px;
    border:1px solid rgba(17,24,39,.12);
    background:#fff;
    font-size:12px;
    font-weight:1000;
    white-space:nowrap;
  }
  .chip b{ font-variant-numeric: tabular-nums; }
  .chip.pink{ background:rgba(255,74,162,.10); border-color:rgba(255,74,162,.22); }
  .chip.sky{ background:rgba(49,194,255,.12); border-color:rgba(49,194,255,.22); }
  .chip.mint{ background:rgba(30,230,193,.14); border-color:rgba(30,230,193,.22); }
  .chip.yellow{ background:rgba(255,225,77,.20); border-color:rgba(255,225,77,.28); }
  .chip.grape{ background:rgba(124,77,255,.10); border-color:rgba(124,77,255,.20); }

  /* ===== Ticker ===== */
  .ticker{
    position:relative; z-index:1;
    margin-top:12px;
    border-radius:18px;
    border:2px dashed rgba(17,24,39,.18);
    background:
      linear-gradient(90deg,
        rgba(255,74,162,.14),
        rgba(255,225,77,.14),
        rgba(30,230,193,.14),
        rgba(49,194,255,.14)
      );
    overflow:hidden;
  }

  .tickerHead{
    display:flex; justify-content:space-between; align-items:center;
    gap:10px;
    padding:8px 10px 0 10px;
    font-size:11px;
    font-weight:1000;
    color: rgba(17,24,39,.68);
  }

  .lane{
    overflow:hidden;
    padding:10px 10px 12px 10px;
    touch-action:manipulation;
  }

  .track{
    display:inline-flex;
    gap:10px;
    white-space:nowrap;
    will-change: transform;
    transform: translate3d(0,0,0);
    animation: move var(--dur, 10s) linear infinite;
  }
  .lane.pause .track{ animation-play-state: paused; }

  .tag{
    display:inline-flex; align-items:center; gap:7px;
    padding:7px 11px;
    border-radius:999px;
    background:#fff;
    border:1px solid rgba(17,24,39,.12);
    box-shadow: 0 2px 8px rgba(17,24,39,.06);
    font-size:12px;
    font-weight:1000;
  }
  .dot{
    width:10px;height:10px;border-radius:3px;
    background: linear-gradient(135deg, var(--orange), var(--pink));
  }
  .sep{
    width:6px;height:6px;border-radius:50%;
    background: rgba(17,24,39,.22);
    align-self:center;
  }

  @keyframes move{
    from{ transform: translate3d(var(--from, 0px),0,0); }
    to{ transform: translate3d(var(--to, -600px),0,0); }
  }

  /* ===== Sections ===== */
  .grid{
    margin-top:12px;
    display:grid;
    grid-template-columns: repeat(2, minmax(0,1fr));
    gap:10px;
  }
  @media (max-width: 560px){
    .grid{ grid-template-columns: 1fr; }
  }

  .card{
    border-radius: var(--r);
    border:1px solid var(--line);
    background:#fff;
    box-shadow: 0 8px 18px rgba(17,24,39,.08);
    padding:12px 12px;
  }

  .title{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    font-size:13px; font-weight:1100;
    margin-bottom:8px;
  }
  .badge{
    font-size:11px; font-weight:1100;
    padding:6px 10px;
    border-radius:999px;
    border:1px solid rgba(17,24,39,.12);
    background: rgba(17,24,39,.04);
    white-space:nowrap;
  }

  .empty{
    font-size:12px;
    font-weight:900;
    color: rgba(17,24,39,.65);
    line-height:1.7;
  }

  /* ===== Fun blocks ===== */
  .bigBox{
    border-radius:18px;
    border:1px solid rgba(17,24,39,.10);
    background:
      radial-gradient(circle at 15% 10%, rgba(255,225,77,.18), transparent 55%),
      #fff;
    padding:10px 10px;
  }
  .bigNum{
    font-size:22px;
    font-weight:1200;
    font-variant-numeric: tabular-nums;
  }
  .bigSub{
    font-size:11px;
    font-weight:900;
    color: rgba(17,24,39,.68);
    margin-top:2px;
  }

  .bar{
    height:14px;
    border-radius:999px;
    background: rgba(17,24,39,.08);
    overflow:hidden;
    margin-top:8px;
    border:1px solid rgba(17,24,39,.08);
  }
  .bar > i{
    display:block; height:100%;
    width: var(--p, 0%);
    border-radius:999px;
    background: linear-gradient(90deg, rgba(255,74,162,.95), rgba(255,225,77,.95), rgba(30,230,193,.95));
  }

  .kv{
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap:8px;
    margin-top:10px;
  }
  @media (max-width: 560px){ .kv{ grid-template-columns:1fr; } }

  .kvRow{
    border-radius:16px;
    border:1px solid rgba(17,24,39,.10);
    background:#fff;
    padding:10px 10px;
    display:flex; justify-content:space-between; gap:10px;
  }
  .k{ font-size:12px; font-weight:1100; color: rgba(17,24,39,.72); }
  .v{ font-size:12px; font-weight:1200; text-align:right; font-variant-numeric: tabular-nums; }

  .list{ display:flex; flex-direction:column; gap:8px; }

  .tile{
    border-radius:18px;
    border:1px dashed rgba(17,24,39,.20);
    background:#fff;
    padding:10px 10px;
  }
  .tileHead{
    display:flex; align-items:center; gap:8px;
    font-size:11px; font-weight:1200;
    color: rgba(17,24,39,.70);
    margin-bottom:6px;
  }
  .num{
    width:24px;height:24px;border-radius:12px;
    display:grid; place-items:center;
    background: rgba(255,225,77,.28);
    border:1px solid rgba(255,225,77,.35);
    font-weight:1200;
  }
  .tileBody{
    font-size:13px;
    font-weight:1000;
    line-height:1.55;
  }
</style>

<script>
  // âœ… 0ãƒ†ãƒ³ãƒ—ãƒ¬ã§ã‚‚å‹•ã â€œiPhoneã§ç¢ºå®Ÿã«é€Ÿããªã‚‹â€ ãƒ†ãƒ­ãƒƒãƒ—åˆ¶å¾¡
  document.addEventListener("DOMContentLoaded", () => {
    const lane = document.querySelector("[data-lane]");
    const track = document.querySelector("[data-track]");
    if (!lane || !track) return;

    // é€Ÿåº¦(px/s)ã§ç®¡ç†ï¼šæ•°å€¤ã‚’ä¸Šã’ãŸã‚‰å¿…ãšé€Ÿããªã‚‹
    const SPEED = 240;   // â˜… ã•ã‚‰ã«é€Ÿãã—ãŸã„ãªã‚‰ 300 / 360
    const MIN_DUR = 3;
    const MAX_DUR = 30;

    const apply = () => {
      const laneW  = lane.clientWidth || 320;
      const trackW = track.scrollWidth || 800;

      const from = laneW;
      const to   = -trackW;
      const dist = from - to;

      let dur = dist / SPEED;
      dur = Math.max(MIN_DUR, Math.min(MAX_DUR, dur));

      track.style.setProperty("--from", from + "px");
      track.style.setProperty("--to", to + "px");
      track.style.setProperty("--dur", dur + "s");
    };

    apply();
    setTimeout(apply, 80);
    setTimeout(apply, 220);
    setTimeout(apply, 600);

    window.addEventListener("resize", () => setTimeout(apply, 80));
    document.addEventListener("visibilitychange", () => { if (!document.hidden) setTimeout(apply, 120); });

    const pauseOn = () => lane.classList.add("pause");
    const pauseOff = () => lane.classList.remove("pause");

    lane.addEventListener("touchstart", pauseOn, {passive:true});
    lane.addEventListener("touchend", pauseOff, {passive:true});
    lane.addEventListener("touchcancel", pauseOff, {passive:true});
    lane.addEventListener("mousedown", pauseOn);
    lane.addEventListener("mouseup", pauseOff);
    lane.addEventListener("mouseleave", pauseOff);
  });
</script>
{% endblock %}

{% block content %}
<div class="wrap">

  <div class="poster">
    <div class="posterTop">
      <div class="brand">
        <div class="mark">ğŸ­</div>
        è¡Œå‹•ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆå®Œå…¨0ãƒ†ãƒ³ãƒ—ãƒ¬ï¼‰
      </div>
      <div class="chip grape">å¤‰æ•°ã‚¼ãƒ­ã§ã‚‚è¡¨ç¤ºOK</div>
    </div>

    <div class="desc">
      ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ã¯ â€œä½•ã‚‚æ¸¡ã•ã‚Œãªã„çŠ¶æ…‹â€ ã‚’å‰æã«ä½œã£ã¦ã‚ã‚‹ã€‚<br>
      ãƒ‡ãƒ¼ã‚¿ãŒæ¥ãŸã‚‰ã€ãã®åˆ†ã ã‘å‹æ‰‹ã«è³‘ã‚„ã‹ã«ãªã‚‹ï¼ˆæ¥ãªã‘ã‚Œã°èª¬æ˜ãƒ¢ãƒ¼ãƒ‰ã§å‹•ãï¼‰ã€‚
    </div>

    <div class="chips">
      <span class="chip pink">ğŸ“… ä»Šæ—¥ <b>{% now "Y-m-d" %}</b></span>
      <span class="chip sky">ğŸ“± iPhoneå¯¾å¿œ <b>OK</b></span>
      <span class="chip mint">ğŸƒ ãƒ†ãƒ­ãƒƒãƒ— <b>é€Ÿåº¦(px/s)</b></span>
      <span class="chip yellow">ğŸ§ª ãƒ‡ãƒ¼ã‚¿ <b>æœªæ¥ç¶š</b></span>
    </div>

    <div class="ticker">
      <div class="tickerHead">
        <div>ãƒ†ãƒ­ãƒƒãƒ—ï¼ˆé•·æŠ¼ã—ã§åœæ­¢ï¼‰</div>
        <div>é€Ÿåº¦ã¯ SPEED ã§åˆ¶å¾¡</div>
      </div>
      <div class="lane" data-lane>
        <div class="track" data-track>
          <span class="tag"><span class="dot"></span>ã“ã“ã« â€œä»Šæ—¥ã®ä¸€è¨€â€ ãŒæµã‚Œã‚‹</span><span class="sep"></span>
          <span class="tag"><span class="dot"></span>iPhoneã§é€Ÿåº¦ãŒå¤‰ã‚ã‚‰ãªã„å•é¡Œã‚’æ½°ã—ãŸ</span><span class="sep"></span>
          <span class="tag"><span class="dot"></span>durationå›ºå®šã˜ã‚ƒãªãã€Œè·é›¢Ã·é€Ÿåº¦ã€ã§æ±ºã‚ã¦ã‚‹</span><span class="sep"></span>
          <span class="tag"><span class="dot"></span>å¿…è¦ãƒ‡ãƒ¼ã‚¿ã¯å¾Œã§1å€‹ã ã‘æ¸¡ã›ã°OK</span><span class="sep"></span>
          <span class="tag"><span class="dot"></span>ã“ã“ã« â€œä»Šæ—¥ã®ä¸€è¨€â€ ãŒæµã‚Œã‚‹</span><span class="sep"></span>
          <span class="tag"><span class="dot"></span>iPhoneã§é€Ÿåº¦ãŒå¤‰ã‚ã‚‰ãªã„å•é¡Œã‚’æ½°ã—ãŸ</span><span class="sep"></span>
        </div>
      </div>
    </div>
  </div>

  <div class="grid">
    <div class="card">
      <div class="title">
        <span>ã“ã®ãƒšãƒ¼ã‚¸ã®ä½¿ã„æ–¹</span>
        <span class="badge">0 â†’ 1ã¸</span>
      </div>
      <div class="empty">
        1) ã¾ãšã€Œè¡¨ç¤ºã—ãŸã„ãƒ‡ãƒ¼ã‚¿ã€ã‚’1ã¤ã«ã¾ã¨ã‚ã¦æ¸¡ã™ã€‚<br>
        2) ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ã¯ãã® â€œ1ã¤â€ ã ã‘è¦‹ã¦æç”»ã™ã‚‹ã€‚<br>
        3) æœªæ¥æ„Ÿã¯ä¸è¦ãªã®ã§ã€ãƒãƒƒãƒ—ã« â€œåˆºã•ã‚‹è¦ç´„â€ ã‚’æœ€å„ªå…ˆã€‚
      </div>

      <div class="kv">
        <div class="kvRow"><div class="k">æ¨å¥¨å…¥åŠ›</div><div class="v">payload 1å€‹</div></div>
        <div class="kvRow"><div class="k">ãƒ†ãƒ­ãƒƒãƒ—</div><div class="v">lines[]</div></div>
        <div class="kvRow"><div class="k">å‹ç‡</div><div class="v">win_rate</div></div>
        <div class="kvRow"><div class="k">ç›´è¿‘</div><div class="v">recent[]</div></div>
      </div>
    </div>

    <div class="card">
      <div class="title">
        <span>ä»Šã¯ãƒ‡ãƒ¼ã‚¿æœªæ¥ç¶š</span>
        <span class="badge">è¡¨ç¤ºå´©ã‚Œ0</span>
      </div>

      <div class="bigBox" style="--p:0%;">
        <div class="bigNum">-</div>
        <div class="bigSub">å‹ç‡ï¼ˆãƒ‡ãƒ¼ã‚¿ãŒæ¥ãŸã‚‰è¡¨ç¤ºï¼‰</div>
        <div class="bar"><i></i></div>

        <div class="kv">
          <div class="kvRow"><div class="k">å¹³å‡R</div><div class="v">-</div></div>
          <div class="kvRow"><div class="k">å¹³å‡PL</div><div class="v">-</div></div>
          <div class="kvRow"><div class="k">WLä»¶æ•°</div><div class="v">-</div></div>
          <div class="kvRow"><div class="k">ç†è§£åº¦</div><div class="v">-</div></div>
        </div>
      </div>

      <div style="margin-top:10px;" class="empty">
        æ¬¡ã¯ã“ã“ã« â€œã‚ãªãŸã®å­¦ç¿’å†…å®¹ãƒ»å‚¾å‘â€ ã‚’è¼‰ã›ã‚‹ã€‚<br>
        ãŸã ã—ãƒ†ãƒ³ãƒ—ãƒ¬ã¯0ã‹ã‚‰ãªã®ã§ã€ã©ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¼‰ã›ã‚‹ã‹ã¯ã“ã‚Œã‹ã‚‰æ±ºã‚ã‚‹ã€‚
      </div>
    </div>
  </div>

  <div class="grid" style="margin-top:10px;">
    <div class="card">
      <div class="title">
        <span>å¥‡æŠœæ ï¼šåˆºã•ã‚‹ä¸€è¨€ï¼ˆä¾‹ï¼‰</span>
        <span class="badge">ãƒ†ãƒ³ãƒ—ãƒ¬å´ãƒ€ãƒŸãƒ¼</span>
      </div>

      <div class="list">
        <div class="tile">
          <div class="tileHead"><div class="num">1</div><div>è¨€ã„åˆ‡ã‚Š</div></div>
          <div class="tileBody">ã€Œå‹ã¡æ–¹ã‚ˆã‚Šã€è² ã‘æ–¹ãŒç›®ç«‹ã¤ã€‚ã¾ãšè² ã‘ã®å½¢ã‚’æ½°ã™ã€‚ã€</div>
        </div>
        <div class="tile">
          <div class="tileHead"><div class="num">2</div><div>è¦³å¯Ÿ</div></div>
          <div class="tileBody">ã€Œé€£æ•—ã¯â€œå¸‚å ´â€ã˜ã‚ƒãªãâ€œå…¥ã‚Šæ–¹â€ã®ç™–ãŒåŸå› ã«ãªã‚Šã‚„ã™ã„ã€‚ã€</div>
        </div>
        <div class="tile">
          <div class="tileHead"><div class="num">3</div><div>å‘½ä»¤</div></div>
          <div class="tileBody">ã€Œæ¬¡ã®3å›ã¯åŒã˜ãƒ«ãƒ¼ãƒ«ã§ã€‚ãƒ–ãƒ¬ãŸç¬é–“ã€å­¦ç¿’ãŒæ¿ã‚‹ã€‚ã€</div>
        </div>
      </div>

      <div style="margin-top:10px;" class="empty">
        ã“ã“ã¯å¾Œã§ â€œå®Ÿãƒ‡ãƒ¼ã‚¿ã‹ã‚‰è‡ªå‹•ç”Ÿæˆâ€ ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã ã‘ã€‚
      </div>
    </div>

    <div class="card">
      <div class="title">
        <span>å¥‡æŠœæ ï¼šãƒãƒƒãƒ—ãªæ³¨æ„æ›¸ã</span>
        <span class="badge">è»½ãåˆºã™</span>
      </div>
      <div class="empty">
        ãƒ»å‹ç‡ã¯ â€œæ°—åˆ†â€ ã‚’ä¸Šã’ã‚‹ã‘ã©ã€æ”¹å–„ã¯ â€œå¹³å‡Râ€ ãŒä¸€ç•ªåŠ¹ãã€‚<br>
        ãƒ»carry / skip ã‚’åˆ¥æ ã«ã™ã‚‹ã ã‘ã§ã€å‹ç‡ãŒå˜˜ã‚’ã¤ã‹ãªããªã‚‹ã€‚<br>
        ãƒ»ãƒ†ãƒ­ãƒƒãƒ—é€Ÿåº¦ã¯ç§’ã˜ã‚ƒãªã„ã€‚px/sã§æ±ºã‚ã‚‹ã¨iPhoneã§ã‚‚ã‚ºãƒ¬ãªã„ã€‚
      </div>
    </div>
  </div>

</div>
{% endblock %}